<div class="activity-container">

    <h3>Películas Vistas</h3>

    @if (watchedMovies.length === 0) {
    <p class="movie-item">No has marcado películas como vistas aún.</p>
    } @else {
    <ul>
        @for (movie of watchedMovies; track movie.id) {
        <li class="movie-item watched-item">
            <div class="watched-header" (click)="toggleDetails(movie.id!)">
                {{ movie.movieName || 'Cargando...' }}
                <span class="arrow">{{ expandedMovieId === movie.id ? '▲' : '▼' }}</span>
            </div>

            @if (expandedMovieId === movie.id) {
            <div class="watched-details">
                <p>Fecha: {{ movie.watchedDate || 'Sin fecha' }}</p>
            </div>
            }
        </li>
        }
    </ul>
    }

    <h3>Películas por Ver</h3>

    @if (toWatchMovies.length === 0) {
    <p>No tienes películas por ver.</p>
    } @else {
    <ul>
        @for (movie of toWatchMovies; track movie.id) {
        <li class="movie-item to-watch-item">
            <span>{{ movie.movieName || 'Cargando...' }}</span>
            <button class="mark-watched-btn" (click)="markAsWatched(movie.id!)">
                ✓ Vista
            </button>
        </li>
        }
    </ul>
    }

</div>