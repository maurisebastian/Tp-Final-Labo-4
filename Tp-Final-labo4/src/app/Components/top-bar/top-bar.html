<div class="topbar-container">

  <!-- IZQUIERDA: LOGO -->
  <div class="topbar-left">
    <a [routerLink]="['/']" class="logo-link">
      <img src="assets/logo-cine.png" alt="MovieHub" class="logo-img" />
      <span class="app-title">MovieHub</span>
    </a>
  </div>

  <!-- CENTRO: BUSCADOR -->
  <div class="topbar-center">
    <div class="search-wrapper">
      <input type="text" class="search-input" placeholder="Buscar película" [formControl]="busqueda"
        (keyup.enter)="buscar()" />

      <button class="search-btn" (click)="buscar()" [disabled]="busqueda.invalid">
        Buscar
      </button>
    </div>
    @if (busqueda.hasError('required') && busqueda.touched) {
    <span class="search-error">
      No se ingresó dato de la película.
    </span>
    }
  </div>

  <!-- DERECHA: PERFIL + ADMIN -->
  <div class="topbar-right">

    <!-- SOLO mostrar Perfil si hay usuario -->
    @if (activeUserSignal()) {
    <a [routerLink]="['/profile-detail']" class="profile-link">
      <span class="profile-text">
        Perfil ({{ activeUserSignal()?.username }})
      </span>
      <img src="assets/perfil.png" alt="Perfil del usuario" class="profile-avatar" />
    </a>
    }

    <!-- Panel admin solo si es admin o superadmin -->
    @if (isAdmin()) {
    <a [routerLink]="['/admin']" class="admin-pill">
      <span>Panel Admin</span>
    </a>
    }



  </div>

</div>