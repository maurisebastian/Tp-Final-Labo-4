<main class="admin-reports-container">
  <h2>Reportes pendientes</h2>

  @if (isLoading) {
    <p>Cargando reportes...</p>
  }

  @if (errorMsg) {
    <p class="error">{{ errorMsg }}</p>
  }

  @if (!isLoading && reports.length === 0) {
    <p>No hay reportes pendientes ðŸŽ‰</p>
  }

  @if (!isLoading && reports.length > 0) {
    <section class="report-list">
      @for (rep of reports; track rep.id) {

        <article class="report-card">

          <p><strong>Tipo:</strong> {{ rep.type }}</p>
          <p><strong>Motivo:</strong> {{ rep.reason }}</p>
          <p><strong>Reportado por ID:</strong> {{ rep.reporterId }}</p>
          <p><strong>Fecha:</strong> {{ rep.createdAt | date:'short' }}</p>

          @if (rep.idMovie) {
            <p>
              <strong>PelÃ­cula:</strong>
              <button
                type="button"
                class="link-movie"
                (click)="goToMovie(rep)">
                ðŸ”— Ver pelÃ­cula
              </button>
            </p>
          }

          <!-- ÃšNICA zona de acciones -->
          <div class="actions">
            <button
              type="button"
              class="ok"
              (click)="changeStatus(rep, 'resolved')">
              âœ” Resolver
            </button>

            <button
              type="button"
              class="cancel"
              (click)="changeStatus(rep, 'dismissed')">
              âœ– Descartar
            </button>
          </div>

        </article>

      }
    </section>
  }
</main>
