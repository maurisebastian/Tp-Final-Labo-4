<!-- src/app/Components/profile-public/profile-public.html -->

<app-top-bar></app-top-bar>

<main class="profile-public-page">

  @if (notFound) {
    <div class="private-box">
      <p class="private-message">Perfil no encontrado.</p>
    </div>
  }
  @else if (!profile) {
    <div class="private-box">
      <p class="private-message">Cargando perfil...</p>
    </div>
  }
  @else {

    <h2 class="public-profile-title">Perfil de {{ profile.username }}</h2>

    <!-- PERFIL PRIVADO: solo mensaje -->
    @if (isPrivate) {
      <div class="private-box">
        <p class="private-message">Este perfil es privado.</p>
      </div>
    }

    <!-- PERFIL PÚBLICO -->
    @else {

      <div class="public-profile">

        <button class="follow-btn" (click)="toggleFollow()">
          {{ isFollowing ? 'Dejar de seguir' : 'Seguir' }}
        </button>

        <div class="public-info">
          <p><strong>Email:</strong> {{ profile.email }}</p>
          <p>
            <strong>Géneros favoritos:</strong>
            {{ profile.favoriteGenres || 'Sin géneros' }}
          </p>
        </div>

        <h3 class="movie-list-title">Listas de películas</h3>

        <!-- Actividad del usuario (vistas / por ver) -->
        <app-user-activity [userId]="profile.id"></app-user-activity>

      </div>
    }

  }

</main>

<app-footer></app-footer>
